# Story 1.2: Create Todo Functionality

## Status

Draft

## Story

**As a** user,
**I want** to add new todo items to my list,
**so that** I can track tasks I need to complete.

## Acceptance Criteria

1: Input field prominently displayed at top of todo list
2: User can type todo title and press Enter or click Add button to create
3: New todos appear immediately at the top of the list
4: Input field clears after successful addition
5: Empty todo titles are prevented (with visual feedback)
6: Each todo has unique ID and creation timestamp
7: Optional description field available for additional details
8: Focus returns to input after todo creation for quick multiple entries

## Tasks / Subtasks

- [ ] Implement AddTodo component with form validation (AC: 1,2,4,5,7)
  - [ ] Create AddTodo.tsx with controlled input for title and optional description
  - [ ] Add form validation for required title, max 200 chars title, max 1000 chars description
  - [ ] Handle form submission on Enter key press or Add button click
  - [ ] Clear input fields after successful todo creation
  - [ ] Display validation errors with visual feedback
- [ ] Integrate AddTodo into application layout (AC: 1,3)
  - [ ] Add AddTodo component to App.tsx above TodoList
  - [ ] Wire AddTodo to TodoContext for dispatching ADD_TODO action
  - [ ] Ensure new todos appear at top of list (modify order logic if needed)
- [ ] Implement unique ID and timestamp generation (AC: 6)
  - [ ] Use UUID v4 for todo IDs
  - [ ] Set creation timestamp using new Date().toISOString()
  - [ ] Ensure order field supports top placement for new todos
- [ ] Add focus management for quick entry (AC: 8)
  - [ ] Return focus to title input after todo creation
  - [ ] Maintain focus state for accessibility
- [ ] Write comprehensive unit tests for AddTodo component (AC: all)
  - [ ] Test component rendering with proper form elements
  - [ ] Test validation for empty titles and length limits
  - [ ] Test successful todo creation and input clearing
  - [ ] Test error display and focus management
  - [ ] Test keyboard interactions (Enter key)
  - [ ] Achieve minimum 60% test coverage for component
- [ ] Update integration tests in App.test.tsx
  - [ ] Add tests for end-to-end todo creation flow
  - [ ] Test AddTodo integration with TodoList display
  - [ ] Verify new todos appear at top of list

## Dev Notes

### Previous Story Insights

- Project foundation established with React 18, TypeScript strict mode, Vite build tool
- Component structure uses flat organization under src/components/ (AddTodo/, TodoItem/, etc.)
- CSS Modules configured for scoped styling
- Jest and React Testing Library set up with 96% coverage achieved in story 1.1
- ESLint and Prettier configured with modern rules
- TodoContext with useReducer pattern implemented for state management
- LocalStorage service created for data persistence
- Project follows atomic design principles but uses simplified component organization

### Data Models

- Todo interface with required fields: id (string), title (string), completed (boolean), createdAt (string), order (number)
- Optional fields: description (string), completedAt (string | null)
- Validation rules: title max 200 chars, description max 1000 chars
- Order field used for list positioning (higher order = added later, but AC requires new todos at top)

[Source: docs/architecture.md#data-models]

### API Specifications

N/A - Client-side application using localStorage for persistence. Todo creation handled through TodoContext dispatch with ADD_TODO action, which triggers localStorage sync via LocalStorageService.

[Source: docs/architecture.md#api-specification]

### Component Specifications

AddTodo (Input Component)

- Responsibility: Form for creating new todos with validation
- Key Interfaces: Controlled input components, form validation, submit handler
- Dependencies: TodoContext (for ADD_TODO action)
- Technology Stack: React, controlled components pattern
- Form elements: Title input (required), description textarea (optional), submit button
- Validation: Client-side validation with error display
- Accessibility: Proper labels, keyboard navigation, focus management

[Source: docs/architecture.md#components]

### File Locations

- AddTodo component: src/components/AddTodo/AddTodo.tsx
- AddTodo styles: src/components/AddTodo/AddTodo.module.css
- AddTodo tests: src/components/AddTodo/AddTodo.test.tsx
- TodoContext: src/contexts/TodoContext.tsx (existing)
- LocalStorageService: src/services/LocalStorageService.ts (existing)
- Todo types: src/types/todo.ts (existing)

[Source: docs/architecture.md#unified-project-structure]

### Testing Requirements

- Test file location: Alongside component in same directory (AddTodo.test.tsx)
- Testing frameworks: Jest + React Testing Library
- Test patterns: Focus on user interactions, mock context dispatches
- Coverage targets: Minimum 60% for components
- Test structure: describe/it blocks with descriptive names
- Mock dependencies: Use jest.fn() for event handlers and context
- Integration tests: Update App.test.tsx for end-to-end flows

[Source: docs/architecture.md#testing-strategy]

### Technical Constraints

- TypeScript strict mode enabled - no implicit any types
- Component purity - no side effects outside useEffect
- State immutability - use spread operators for updates
- Accessibility required - ARIA labels, keyboard support
- Performance - avoid unnecessary re-renders with React.memo if needed
- Bundle size - keep component lightweight (< 150KB total gzipped target)

[Source: docs/architecture.md#coding-standards]

### Project Structure Notes

Current project uses flat component structure (src/components/ComponentName/) rather than atomic design folders (atoms/molecules/organisms). This is acceptable for current complexity but may need refactoring for larger scale. AddTodo component should follow existing pattern with dedicated folder and CSS Modules.

## Change Log

| Date       | Version | Description            | Author             |
| ---------- | ------- | ---------------------- | ------------------ |
| 2025-01-25 | 1.0     | Initial story creation | Bob (Scrum Master) |

## Dev Agent Record

### Agent Model Used

### Debug Log References

### Completion Notes List

### File List

## QA Results
